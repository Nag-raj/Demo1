const products = {
    productList: {
            "type": "productCategorySearchPageWsDTO",
            "currentQuery": {
              "query": {
                "value": ":relevance"
              },
              "url": "/search?q=%3Arelevance"
            },
            "freeTextSearch": "",
            "pagination": {
              "currentPage": 0,
              "pageSize": 10,
              "sort": "relevance",
              "totalPages": 1,
              "totalResults": 2
            },
            "products": [
              {
                "baseProduct": "18X23_SHELF",
                "baseProductName": "18X23 SHELF",
                "code": "CNDRSHF18X23SF",
                "name": "Shelf with Drawer",
                "otherVariants": [
                  {
                    "baseProduct": "18X23_SHELF",
                    "baseProductName": "18X23 SHELF",
                    "code": "CNSHFLT18X23ASSYSR",
                    "name": "SHELF WITH SIDE RAILS",
                    "purchaseEnabled": true,
                    "price": {
                        "currencyIso": "USD",
                        "formattedValue": "$457.30",
                        "priceType": "BUY",
                        "value": 457.3
                    },                
                    "url": "/Equipment-Accessories/Storage-%26-Storage-Cabinets/18X23-SHELF/p/CNSHFLT18X23ASSYSR"
                  },
                  {
                    "baseProduct": "18X23_SHELF",
                    "baseProductName": "18X23 SHELF",
                    "code": "CNSHFLY18X23ASSYFH",
                    "name": "SINGLE SHELF With CONTROL",
                    "price": {
                        "currencyIso": "USD",
                        "formattedValue": "$457.30",
                        "priceType": "BUY",
                        "value": 457.3
                      },
                
                    "purchaseEnabled": false,
                    "url": "/Equipment-Accessories/Storage-%26-Storage-Cabinets/18X23-SHELF/p/CNSHFLY18X23ASSYFH"
                  }
                ],
                "price": {
                    "currencyIso": "USD",
                    "formattedValue": "$457.30",
                    "priceType": "BUY",
                    "value": 457.3
                  },            
                "priceRange": {},
                "purchaseEnabled": false,
                "url": "/Equipment-Accessories/Storage-%26-Storage-Cabinets/18X23-SHELF/p/CNDRSHF18X23SF",
                "volumePricesFlag": false
              },
              {
                "baseProduct": "18X18_SINGLE_DRAWER",
                "baseProductName": "18X18 SINGLE DRAWER",
                "code": "CNDRWRSHFLT18SGL",
                "name": "NO CONTROL",
                "otherVariants": [
                  {
                    "baseProduct": "18X18_SINGLE_DRAWER",
                    "baseProductName": "18X18 SINGLE DRAWER",
                    "code": "CNDRWRSHFLT18SGLFH",
                    "name": "With CONTROL",
                    "purchaseEnabled": true,
                    "price": {
                        "currencyIso": "USD",
                        "formattedValue": "$457.30",
                        "priceType": "BUY",
                        "value": 457.3
                    },                
                    "url": "/Equipment-Accessories/Storage-%26-Storage-Cabinets/18X18-SINGLE-DRAWER/p/CNDRWRSHFLT18SGLFH"
                  }
                ],
                "price": {
                    "currencyIso": "USD",
                    "formattedValue": "$457.30",
                    "priceType": "BUY",
                    "value": 457.3
                },
                "priceRange": {},
                "purchaseEnabled": true,
                "url": "/Equipment-Accessories/Storage-%26-Storage-Cabinets/18X18-SINGLE-DRAWER/p/CNDRWRSHFLT18SGL",
                "volumePricesFlag": false
              },
              {
                "baseProduct": "18X23_SHELF",
                "baseProductName": "18X23 SHELF",
                "code": "CNDRSHF18X23SF",
                "name": "Shelf with Drawer",
                "otherVariants": [
                  {
                    "baseProduct": "18X23_SHELF",
                    "baseProductName": "18X23 SHELF",
                    "code": "CNSHFLT18X23ASSYSR",
                    "name": "SHELF WITH SIDE RAILS",
                    "purchaseEnabled": true,
                    "price": {
                        "currencyIso": "USD",
                        "formattedValue": "$457.30",
                        "priceType": "BUY",
                        "value": 457.3
                    },                
                    "url": "/Equipment-Accessories/Storage-%26-Storage-Cabinets/18X23-SHELF/p/CNSHFLT18X23ASSYSR"
                  },
                  {
                    "baseProduct": "18X23_SHELF",
                    "baseProductName": "18X23 SHELF",
                    "code": "CNSHFLY18X23ASSYFH",
                    "name": "SINGLE SHELF With CONTROL",
                    "price": {
                        "currencyIso": "USD",
                        "formattedValue": "$457.30",
                        "priceType": "BUY",
                        "value": 457.3
                      },
                
                    "purchaseEnabled": true,
                    "url": "/Equipment-Accessories/Storage-%26-Storage-Cabinets/18X23-SHELF/p/CNSHFLY18X23ASSYFH"
                  }
                ],
                "price": {
                    "currencyIso": "USD",
                    "formattedValue": "$457.30",
                    "priceType": "BUY",
                    "value": 457.3
                  },            
                "priceRange": {},
                "purchaseEnabled": true,
                "url": "/Equipment-Accessories/Storage-%26-Storage-Cabinets/18X23-SHELF/p/CNDRSHF18X23SF",
                "volumePricesFlag": false
              },
              {
                "baseProduct": "18X18_SINGLE_DRAWER",
                "baseProductName": "18X18 SINGLE DRAWER",
                "code": "CNDRWRSHFLT18SGL",
                "name": "NO CONTROL",
                "otherVariants": [
                  {
                    "baseProduct": "18X18_SINGLE_DRAWER",
                    "baseProductName": "18X18 SINGLE DRAWER",
                    "code": "CNDRWRSHFLT18SGLFH",
                    "name": "With CONTROL",
                    "purchaseEnabled": true,
                    "price": {
                        "currencyIso": "USD",
                        "formattedValue": "$457.30",
                        "priceType": "BUY",
                        "value": 457.3
                    },                
                    "url": "/Equipment-Accessories/Storage-%26-Storage-Cabinets/18X18-SINGLE-DRAWER/p/CNDRWRSHFLT18SGLFH"
                  }
                ],
                "price": {
                    "currencyIso": "USD",
                    "formattedValue": "$457.30",
                    "priceType": "BUY",
                    "value": 457.3
                },
                "priceRange": {},
                "purchaseEnabled": true,
                "url": "/Equipment-Accessories/Storage-%26-Storage-Cabinets/18X18-SINGLE-DRAWER/p/CNDRWRSHFLT18SGL",
                "volumePricesFlag": false
              }
            ],
            "sorts": [
              {
                "code": "relevance",
                "selected": true
              },
              {
                "code": "name-asc",
                "selected": false
              },
              {
                "code": "name-desc",
                "selected": false
              },
              {
                "code": "price-asc",
                "selected": false
              },
              {
                "code": "price-desc",
                "selected": false
              }
            ]
    },

    // This section needs to be provided to AEM team for Product Element for OEC-3
    init: function() {

        let el = document.querySelector('.productcollection__items');
        console.log(this.productList);
        for (let i = 0; i < this.productList.products.length; i++) {
            let node = '';
            node = node + `<a
            class="productcollection__item" data-index=${i}>
            <div class="productcollection__item-images">
                <img src="" class="productcollection__item-image" src="" alt=""/>
            </div>
            <div class="productcollection__item-title"><span>${this.productList.products[i].baseProductName}</span></div>
            <div class="productcollection__item-table">
        
                <div class="productcollection__item-table--header">
                    <span class="productcollection__item-table--header-item">Model Number</span>
                    <span class="productcollection__item-table--header-item">Product</span>
                    <span class="productcollection__item-table--header-item">Quote Description</span>
                    <span class="productcollection__item-table--header-item">Your Price</span>
                    <span class="productcollection__item-table--header-item">Quantity</span>
                </div>
                <div class="productcollection__item-table--data">`
                if (this.productList.products[i].purchaseEnabled) {
                  node = node + `
                  <div class="productcollection__item-table--data-row">
                    <span class="productcollection__item-table--data-item">${this.productList.products[i].code}</span>
                    <span class="productcollection__item-table--data-item">${this.productList.products[i].name}</span>
                    <span class="productcollection__item-table--data-item">${this.productList.products[i].description}</span>
                    <div class="price productcollection__item-table--data-item">
                        <span class="price-item">${this.productList.products[i].price.formattedValue}</span>
                    </div>
                    <div class="productcollection__item-quantity productcollection__item-table--data-item">
                        <input class="productcollection__item-quantity-value" type="number" value="1" onChange="onQuantityChange(event)" onKeyDown="quantityValidations(event)"/>
                    </div>
                    <div class="productcollection__item-actions">
                        <button class="productcollection__item-button productcollection__item-button--add-to-cart" type="button">
                            <span class="productcollection__item-button-content">
                                <span>Add to Cart</span>
                            </span>
                        </button>
                        <button class="productcollection__item-button productcollection__item-button--add-to-wish-list" type="button">
                            <span class="productcollection__item-button-content">
                                <span>Add to Wish List</span>
                            </span>
                        </button>
                    </div>
                </div>`
                } else {
                  node = node + `<div class="productcollection__item-table--data-row productcollection__item-unavailable">
                            <span class="productcollection__item-table--data-item">${this.productList.products[i].code}</span>
                            <span class="productcollection__item-table--data-item">${this.productList.products[i].name}</span>
                            <span class="productcollection__item-table--data-item">${this.productList.products[i].description}</span>
                            <div class="price productcollection__item-table--data-item">
                                <span class="price-item">${this.productList.products[i].price.formattedValue}</span>
                            </div>
                            <div class="productcollection__item-table--data-item productcollection__item-unavailable--text">
                              <img src="/assets/icons/Important_Red.svg" alt="Important Red"/>
                              <span>Temporarily Unavailable</span>
                            </div>
                          </div>`
                }
                                      
            if (this.productList.products[i].otherVariants.length > 0) {
              for (let j = 0; j<this.productList.products[i].otherVariants.length; j++) {
                if (this.productList.products[i].otherVariants[j].purchaseEnabled) {
                node = node + `
                <div class="productcollection__item-table--data-row">
                    <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].code}</span>
                    <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].name}</span>
                    <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].description}</span>
                    <div class="price productcollection__item-table--data-item">
                        <span class="price-item">${this.productList.products[i].otherVariants[j].price.formattedValue}</span>
                    </div>
                    <div class="productcollection__item-quantity productcollection__item-table--data-item">
                                <input class="productcollection__item-quantity-value" type="number" value="1" onChange="onQuantityChange(event)" onKeyDown="quantityValidations(event)"/>
                            </div>
                            <div class="productcollection__item-actions">
                                <button class="productcollection__item-button productcollection__item-button--add-to-cart" type="button">
                                    <span class="productcollection__item-button-content">
                                        <span>Add to Cart</span>
                                    </span>
                                </button>
                                <button class="productcollection__item-button productcollection__item-button--add-to-wish-list" type="button">
                                    <span class="productcollection__item-button-content">
                                        <span>Add to Wish List</span>
                                    </span>
                                </button>
                            </div>
                            </div>`
                    } else {
                      node = node + `<div class="productcollection__item-table--data-row productcollection__item-unavailable">
                      <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].code}</span>
                      <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].name}</span>
                      <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].description}</span>
                      <div class="price productcollection__item-table--data-item">
                          <span class="price-item">${this.productList.products[i].otherVariants[j].price.formattedValue}</span>
                      </div>
                      <div class="productcollection__item-table--data-item productcollection__item-unavailable--text"><img src="/assets/icons/Important_Red.svg" alt="Important Red"/><span>Temporarily Unavailable</span></div>
                      </div>`
                    } 
              }
            }

            node = node + `</div>`;

            node = node + `
            <div class="productcollection__item-mobile">`

            if (this.productList.products[i].purchaseEnabled) {
              node = node + `
              <div class="productcollection__item-mobile-row">
                  <span class="productcollection__item-mobile-row-title">Model Number</span>
                  <span class="productcollection__item-table--data-item">${this.productList.products[i].code}</span>
                  <span class="productcollection__item-mobile-row-title">Product</span>
                  <span class="productcollection__item-table--data-item">${this.productList.products[i].name}</span>
                  <span class="productcollection__item-mobile-row-title">Quote Description</span>
                  <span class="productcollection__item-table--data-item">${this.productList.products[i].description}</span>
                  <div class="productcollection__item-mobile-row-actions">
                      <div class="productcollection__item-mobile-row-actions-price">
                          <span class="productcollection__item-mobile-row-title">Your Price</span>
                          <div class="price productcollection__item-table--data-item">
                              <span class="price-item">${this.productList.products[i].price.formattedValue}</span>
                          </div>
                      </div>
                      <div class="productcollection__item-quantity productcollection__item-table--data-item">
                          <input class="productcollection__item-quantity-value" type="number" value="1" onChange="onQuantityChange(event)" onKeyDown="quantityValidations(event)"/>
                      </div>
                      <div class="productcollection__item-actions">
                          <button class="productcollection__item-button productcollection__item-button--add-to-cart" type="button">
                              <span class="productcollection__item-button-content">
                                  <span>Add to Cart</span>
                              </span>
                          </button>
                          <button class="productcollection__item-button productcollection__item-button--add-to-wish-list" type="button">
                              <span class="productcollection__item-button-content">
                                  <span>Add to Wish List</span>
                              </span>
                          </button>
                      </div>
                  </div>
                </div>`
            } else {
              node = node + `
              <div class="productcollection__item-mobile-row">
                <span class="productcollection__item-mobile-row-title">Model Number</span>
                <span class="productcollection__item-table--data-item">${this.productList.products[i].code}</span>
                <span class="productcollection__item-mobile-row-title">Product</span>
                <span class="productcollection__item-table--data-item">${this.productList.products[i].name}</span>
                <span class="productcollection__item-mobile-row-title">Quote Description</span>
                <span class="productcollection__item-table--data-item">${this.productList.products[i].description}</span>
                <div class="productcollection__item-mobile-row-actions">
                    <div class="productcollection__item-mobile-row-actions-price">
                        <span class="productcollection__item-mobile-row-title">Your Price</span>
                        <div class="price productcollection__item-table--data-item">
                            <span class="price-item">${this.productList.products[i].price.formattedValue}</span>
                        </div>
                    </div>
                    <div class="productcollection__item-table--data-item productcollection__item-unavailable--text">
                      <img src="/assets/icons/Important_Red.svg" alt="Important Red"/>
                      <span>Temporarily Unavailable</span>
                    </div>
                </div>
              </div>`
              }    
              
              if (this.productList.products[i].otherVariants.length > 0) {
                for (let j = 0; j<this.productList.products[i].otherVariants.length; j++) {
                  if (this.productList.products[i].otherVariants[j].purchaseEnabled) {
                  node = node + `
                  <div class="productcollection__item-mobile-row">
                    <span class="productcollection__item-mobile-row-title">Model Number</span>
                    <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].code}</span>
                    <span class="productcollection__item-mobile-row-title">Product</span>
                    <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].name}</span>
                    <span class="productcollection__item-mobile-row-title">Quote Description</span>
                    <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].description}</span>
                    <div class="productcollection__item-mobile-row-actions">
                        <div class="productcollection__item-mobile-row-actions-price">
                            <span class="productcollection__item-mobile-row-title">Your Price</span>
                            <div class="price productcollection__item-table--data-item">
                                <span class="price-item">${this.productList.products[i].otherVariants[j].price.formattedValue}</span>
                            </div>
                        </div>
                        <div class="productcollection__item-quantity productcollection__item-table--data-item">
                            <input class="productcollection__item-quantity-value" type="number" value="1" onChange="onQuantityChange(event)" onKeyDown="quantityValidations(event)"/>
                        </div>
                        <div class="productcollection__item-actions">
                            <button class="productcollection__item-button productcollection__item-button--add-to-cart" type="button">
                                <span class="productcollection__item-button-content">
                                    <span>Add to Cart</span>
                                </span>
                            </button>
                            <button class="productcollection__item-button productcollection__item-button--add-to-wish-list" type="button">
                                <span class="productcollection__item-button-content">
                                    <span>Add to Wish List</span>
                                </span>
                            </button>
                        </div>
                      </div> 
                    </div>`
                      } else {
                        node = node + `
                        <div class="productcollection__item-mobile-row">
                          <span class="productcollection__item-mobile-row-title">Model Number</span>
                          <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].code}</span>
                          <span class="productcollection__item-mobile-row-title">Product</span>
                          <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].name}</span>
                          <span class="productcollection__item-mobile-row-title">Quote Description</span>
                          <span class="productcollection__item-table--data-item">${this.productList.products[i].otherVariants[j].description}</span>
                          <div class="productcollection__item-mobile-row-actions">
                              <div class="productcollection__item-mobile-row-actions-price">
                                  <span class="productcollection__item-mobile-row-title">Your Price</span>
                                  <div class="price productcollection__item-table--data-item">
                                      <span class="price-item">${this.productList.products[i].otherVariants[j].price.formattedValue}</span>
                                  </div>
                              </div>
                              <div class="productcollection__item-table--data-item productcollection__item-unavailable--text">
                                <img src="/assets/icons/Important_Red.svg" alt="Important Red"/>
                                <span>Temporarily Unavailable</span>
                              </div>
                          </div>
                        </div>`
                      } 
                }
              }

            node = node + `</div></div>`

            if (this.productList.products[i].otherVariants.length > 0) {
                node = node + `
                <div class="productcollection__item-view">
                    <button type="button" class="productcollection__item-view-button-more" data-index=${i} onclick="openViewMore(event)">View More Options <img src="/assets/icons/Arrow_Blue.svg" alt="Blue Arrow"></button>
                    <button type="button" class="productcollection__item-view-button-less" data-index=${i} onclick="closeViewMore(event)" style="display: none">View Less Options <img src="/assets/icons/Arrow_Blue.svg" alt="Blue Arrow"></button>
                </div>
             </a>`
            } else {
                node = node + `
                </a>`
            }

            $(el).append(node);
        }
    },

    getProducts: function() {
      fetch('https://adobeioruntime.net/api/v1/web/27203-361yellowhalibut-nikhiladmin/hybris-graphql/dispatcher', {
            method: 'POST',
            body: JSON.stringify({
              query: `{
                products(
                  filter: { sku: { eq: "BD-410X-0855" } }) {
                    items {
                      name
                      sku
                      price_range{minimum_price{regular_price{value}}}
                    }
                  }
                }`
            }),
            headers: {
                'content-type': 'application/json'
            }
          }).then(async (data) => {
              // Console log our return data
              console.log(await data.json());
          });
    },
};

// This method is to handle view more
openViewMore = function(event) {
  console.log("event", event.currentTarget.dataset);
  let index = event.currentTarget.dataset.index;
  if (index) {
    let item = document.querySelectorAll('.productcollection__item')[index];
  if ($(window).width() <= 765) {
    let mainElement = item.querySelector('.productcollection__item-mobile');
    let dataRows = mainElement.querySelectorAll('.productcollection__item-mobile-row');
    dataRows.forEach((el, i) => {
      if (el.classList.contains('productcollection__item-unavailable')) {
        el.style.display = 'flex';
      } else {
        el.style.display = 'inline-grid';
      }
    });
  } else {
    let mainElement = item.querySelector('.productcollection__item-table--data');
    let dataRows = mainElement.querySelectorAll('.productcollection__item-table--data-row');
    dataRows.forEach((el, i) => {
      if (i !== 0) {
        el.style.display = 'grid';
      }
    });  
  }
  item.querySelector('.productcollection__item-view-button-more').style.display = 'none';
  item.querySelector('.productcollection__item-view-button-less').style.display = 'inline-block';
  }
},

// This method is to handle view less
closeViewMore = function(event) {
  let index = event.currentTarget.dataset.index;
  if (index) {
    let item = document.querySelectorAll('.productcollection__item')[index];
    if ($(window).width() <= 765) {
      let mainElement = item.querySelector('.productcollection__item-mobile');
      let dataRows = mainElement.querySelectorAll('.productcollection__item-mobile-row');
      dataRows.forEach((el, i) => {
        if (i !== 0) {
          el.style.display = 'none';
        }
      });
    } else {
      let mainElement = item.querySelector('.productcollection__item-table--data');
      let dataRows = mainElement.querySelectorAll('.productcollection__item-table--data-row');
      dataRows.forEach((el, i) => {
        if (i !== 0) {
          el.style.display = 'none';
        }
      });
    }
    
    item.querySelector('.productcollection__item-view-button-more').style.display = 'inline-block';
    item.querySelector('.productcollection__item-view-button-less').style.display = 'none';
  }
}

//Validate Quantity Value on Change
preventInvalidQuantity = function(event) {
  if (parseInt(event.target.value) == 0 || parseInt(event.target.value) >= 10000) {
    event.target.value = 1;
  }
}

//Prevent the special characters and alphabets on quantity field
quantityValidations = function(event) {
  const keyCode = event.keyCode;
    const excludedKeys = [8, 37, 39, 46];
    if (!((keyCode >= 48 && keyCode <= 57) ||
      (keyCode >= 96 && keyCode <= 105) ||
      (excludedKeys.includes(keyCode)))) {
      event.preventDefault();
    }
}

onQuantityChange = function(event) {
  if (event.target.value == "") {
    event.target.value = 1;
  }
}


onAddToCart = async function (event) {
  const addToCart = event.currentTarget;
  const buttonElement = addToCart.querySelector('.productcollection__item-button-content');
  addToCart.classList.toggle('disabled');
  const cartId = localStorage.getItem("cartId");
  const sku = addToCart.dataset.sku;
  let quantitySelectorDesktop = null;
  let quantitySelectorMobile = null;
  (document.querySelectorAll(`[data-item='${sku}']`)).forEach((el) => {
    if (el.classList.contains('productcollection__item-table--data-row')) {
      quantitySelectorDesktop = el;
    } else {
      if (el.classList.contains('productcollection__item-mobile-row')) {
        quantitySelectorMobile = el;
      }
    }
  });
  let quantity = 0;
  if ($(window).width() <= 765) {
    quantity = $((quantitySelectorMobile.querySelector('.productcollection__item-quantity')).querySelector('input')).val();
  } else {
    quantity = $((quantitySelectorDesktop.querySelector('.productcollection__item-quantity')).querySelector('input')).val();
  }
  const buttonValue = $(buttonElement.querySelector('span')).text();
  const product = {
    quantity: parseInt(quantity),
    sku: sku
  };
  fetch(JSON.parse(document.querySelector(`[name='store-config']`)?.getAttribute('content'))?.graphqlEndpoint, {
    method: 'POST',
    body: JSON.stringify({
      query: `mutation {
        addProductsToCart(cartId: \"${cartId}\"
          userId: \"${localStorage.getItem('userEmailId')}\"
          orgUnitId: \"${localStorage.getItem('userAccountId')}\"
          cartItems: [{ quantity: ${product.quantity}, sku: \"${product.sku}\" }]
        ) {
          cart {
            items {
              id
              product {
                name
                sku
              }
              quantity
            }
          }
        }
      }`
    }),
    headers: {
        'content-type': 'application/json'
    }
  }).then(async (data) => {
      const response = await data.json();

      if (response?.errors?.length > 0) {
        addToCart.classList.toggle('disabled');
      } else {
        addToCart.classList.toggle('remove-padding');
        $(buttonElement.querySelector('span')).text('Added To Cart');

        fetch(JSON.parse(document.querySelector(`[name='store-config']`)?.getAttribute('content'))?.graphqlEndpoint, {
          method: 'POST',
          body: JSON.stringify({
            query: `{
              customerCart(userId: \"${localStorage.getItem('userEmailId')}\",cartCount: true)
              {
                code
                displayTotalUnitCount
              }
            }`
          }),
          headers: {
              'content-type': 'application/json'
          }
        }).then(async(data) => {
          const minicartResponse = await data.json();
          if (minicartResponse?.data?.customerCart?.displayTotalUnitCount !== "0" && minicartResponse?.data?.customerCart?.displayTotalUnitCount !== null) {
            console.log(minicartResponse);
            const minicartAnchor = document.querySelector('#hoverme');
            minicartAnchor.removeEventListener('click', window.openPanel);
            minicartAnchor.href = minicartAnchor.getAttribute('data-link');
            minicartAnchor.querySelector('#minicart-value').style.display = 'block';
            $(minicartAnchor.querySelector('#minicart-value')).text(minicartResponse?.data?.customerCart?.displayTotalUnitCount);
          }
        });
        await this.buttonAnimation();
        addToCart.classList.toggle('disabled');
        addToCart.classList.contains('remove-padding') ? addToCart.classList.remove('remove-padding') : '';
        $(buttonElement.querySelector('span')).text(buttonValue);
      }
  });
}

buttonAnimation = function() {
  return new Promise(resolve => {
    setTimeout(resolve, 3000);
 });
}

$(document).ready(function () {
    // products.init();
    // products.getProducts();
});